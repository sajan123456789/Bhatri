<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CareerSteps â€“ AI Analysis Result</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>

<style>
body { background:#020617; color:#fff; font-family:system-ui; transition: background 0.5s ease; scroll-behavior: smooth; }
.glass { background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.1); backdrop-filter:blur(14px); }
.step { border-left:3px solid #6366f1; padding-left:16px; transition: border 0.5s ease; position: relative; }
.step::before { content: ''; position: absolute; left: -6px; top: 0; width: 11px; height: 11px; border-radius: 50%; background: #6366f1; box-shadow: 0 0 15px #6366f1; }

/* AI Dynamic Themes */
.theme-science { border-top: 8px solid #3b82f6; box-shadow: 0 0 50px rgba(59, 130, 246, 0.15); }
.theme-commerce { border-top: 8px solid #10b981; box-shadow: 0 0 50px rgba(16, 185, 129, 0.15); }
.theme-arts { border-top: 8px solid #a855f7; box-shadow: 0 0 50px rgba(168, 85, 247, 0.15); }

.text-science { color: #60a5fa; }
.text-commerce { color: #34d399; }
.text-arts { color: #c084fc; }

.bg-science { background: #3b82f6; }
.bg-commerce { background: #10b981; }
.bg-arts { background: #a855f7; }

.pulse { animation: pulse 2s infinite; }
</style>
</head>

<body class="px-4 pb-20">

<header class="max-w-6xl mx-auto py-6 flex justify-between items-center border-b border-white/5 mb-6">
  <a href="index.html" class="group transition-all">
    <h1 class="text-xl font-bold text-indigo-400 tracking-tighter flex items-center gap-1 group-hover:scale-105 transition-transform">
      CareerSteps <span class="text-[10px] border border-indigo-500 bg-indigo-500/10 text-indigo-400 px-2 rounded-full py-0.5 uppercase font-black">AI v2.0</span>
    </h1>
  </a>
  <nav class="flex gap-6">
    <a href="index.html" class="text-gray-400 hover:text-white text-xs font-bold uppercase tracking-widest transition-all">Home</a>
    <a href="#" class="text-gray-400 hover:text-white text-xs font-bold uppercase tracking-widest transition-all">About AI</a>
  </nav>
</header>

<section id="resultCard" class="max-w-4xl mx-auto mt-8 glass rounded-[2.5rem] p-8 md:p-12 text-center transition-all duration-1000 opacity-0 transform translate-y-12">
  
  <div class="flex items-center justify-center gap-3 mb-8">
    <div class="h-1 w-24 bg-gray-800 rounded-full overflow-hidden">
      <div id="confBar" class="h-full bg-indigo-500 w-[100%] transition-all duration-1000"></div>
    </div>
    <span class="text-[10px] font-mono text-indigo-500 tracking-widest uppercase pulse font-bold" id="aiTag">SYSTEM_SYNCED</span>
  </div>

  <div class="mb-4">
    <p id="userDisplayName" class="text-indigo-400 text-xs font-black uppercase tracking-[0.3em] mb-2">ANALYSIS FOR: STUDENT</p>
    <span id="badge" class="px-5 py-2 rounded-full text-[10px] font-black uppercase tracking-[0.25em] text-white shadow-xl">
      Neural Match Identified
    </span>
  </div>

  <h2 id="title" class="text-5xl md:text-7xl font-black mt-6 mb-4 tracking-tighter uppercase italic"></h2>
  <p id="matchValue" class="text-green-400 font-mono text-xs mb-4 font-bold tracking-widest"></p>
  <p id="description" class="text-gray-400 text-lg md:text-xl mb-12 max-w-2xl mx-auto leading-relaxed font-medium"></p>

  <div class="flex flex-wrap justify-center gap-4 mb-16">
    <button onclick="handleUniversalShare()" class="inline-flex items-center gap-3 bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-4 rounded-2xl font-black transition-all transform hover:scale-105 active:scale-95 shadow-lg uppercase text-[10px] tracking-widest">
       Share Report
    </button>
    <a href="index.html" class="inline-flex items-center gap-3 bg-white/5 border border-white/10 text-white px-6 py-4 rounded-2xl font-black transition-all transform hover:scale-105 active:scale-95 uppercase text-[10px] tracking-widest">
      Take Your Own Test
    </a>
  </div>

  <div class="text-left mb-16">
    <h3 class="text-2xl font-black mb-8 italic uppercase tracking-tighter text-indigo-300">Strategic Roadmap</h3>
    <div id="roadmap" class="space-y-10 border-l-2 border-white/5 ml-5"></div>
  </div>

  <div id="deepDiveSection" class="text-left mt-10 mb-16">
    <h3 class="text-2xl font-black mb-2 italic uppercase tracking-tighter text-indigo-300">Specialized Roles</h3>
    <div id="careerGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5"></div>
  </div>

</section>

<script>
// 1. GET DATA FROM URL OR LOCALSTORAGE
const urlParams = new URLSearchParams(window.location.search);
const result = urlParams.get('res') || localStorage.getItem("careerResult") || "science";
const userName = urlParams.get('name') || localStorage.getItem("user_name") || "Explorer";
const matchPercent = urlParams.get('match') || localStorage.getItem("matchPercent") || "92";

const database = {
  science: {
    theme: "theme-science", btn: "bg-science", txt: "text-science", tag: "SC_v4",
    title:"Science",
    desc:"Aapka cognitive pattern complex analysis aur structural logic ke liye optimize kiya gaya hai.",
    roadmap:["11th-12th (PCM/PCB) Foundation","Technical Aptitude Mastery","Engineering or R&D Specialization"],
    deepDive: [{role: "AI Scientist", pay: "15-30L"}, {role: "Robotics", pay: "12-25L"}, {role: "Data Architect", pay: "10-22L"}]
  },
  commerce: {
    theme: "theme-commerce", btn: "bg-commerce", txt: "text-commerce", tag: "EC_v2",
    title:"Commerce",
    desc:"AI ne aapke andar advanced financial management aur strategic business intelligence detect kiya hai.",
    roadmap:["Applied Maths & Commerce","Professional Certs (CA/CFA)","Global Finance Dominance"],
    deepDive: [{role: "IB Banker", pay: "18-40L"}, {role: "FinTech", pay: "12-24L"}, {role: "Chartered Accountant", pay: "10-25L"}]
  },
  arts: {
    theme: "theme-arts", btn: "bg-arts", txt: "text-arts", tag: "CR_v9",
    title:"Arts & Creative",
    desc:"Aapka mindset emotional intelligence, creative expression aur societal impact ke liye peak par hai.",
    roadmap:["Creative Foundation","Analytical Writing","Policy or Design Mastery"],
    deepDive: [{role: "UX Strategy", pay: "12-26L"}, {role: "Public Policy", pay: "9-18L"}, {role: "Creative Director", pay: "10-30L"}]
  }
};

const data = database[result] || database.science;

// 2. FILL UI
document.getElementById("userDisplayName").innerText = "ANALYSIS FOR: " + userName.toUpperCase();
document.getElementById("matchValue").innerText = "NEURAL COMPATIBILITY: " + matchPercent + "%";
document.getElementById("resultCard").classList.add(data.theme);
document.getElementById("badge").classList.add(data.btn);
document.getElementById("title").classList.add(data.txt);
document.getElementById("title").innerText = data.title;
document.getElementById("description").innerText = data.desc;
document.getElementById("aiTag").innerText = "SYSTEM_" + data.tag;
setTimeout(() => document.getElementById("resultCard").classList.remove("opacity-0", "translate-y-12"), 100);

data.roadmap.forEach((r, i) => {
  document.getElementById("roadmap").innerHTML += `<div class="step"><div class="text-[10px] font-mono opacity-40 mb-2">Node 0${i+1}</div><div class="text-lg font-bold">${r}</div></div>`;
});

data.deepDive.forEach(item => {
    document.getElementById("careerGrid").innerHTML += `<div class="glass p-6 rounded-3xl border-b-2 border-transparent hover:border-indigo-500 transition-all"><h4 class="text-lg font-bold text-white mb-2">${item.role}</h4><div class="text-[11px] text-gray-500 uppercase">Avg: ${item.pay}</div></div>`;
});

// 3. UPDATED SHARE FUNCTION (NOW SENDING DATA IN LINK)
async function handleUniversalShare() {
  // Creating a smart link with data
  const baseLink = "https://sajan123456789.github.io/Bhatri/result.html";
  const finalLink = `${baseLink}?res=${result}&name=${encodeURIComponent(userName)}&match=${matchPercent}`;
  
  const shareText = `ðŸ¤– *CareerSteps AI Report*\n\nðŸ‘¤ *Name:* ${userName}\nðŸŽ¯ *Match:* ${data.title}\nðŸ“Š *Neural:* ${matchPercent}%\n\nCheck full AI roadmap here: ðŸ‘‡`;

  if (navigator.share) {
    try {
      await navigator.share({ title: 'AI Report', text: shareText, url: finalLink });
    } catch (err) {
      fallbackToWhatsApp(shareText + "\n" + finalLink);
    }
  } else {
    fallbackToWhatsApp(shareText + "\n" + finalLink);
  }
}

function fallbackToWhatsApp(msg) {
  window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, '_blank');
}
</script>
</body>
</html>
