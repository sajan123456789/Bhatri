<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CareerSteps | AI Career Report</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
body{
  background:#020617;
  color:#fff;
  font-family:'Plus Jakarta Sans',sans-serif;
}
.glass{
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.08);
  backdrop-filter:blur(14px);
}
.gradient-text{
  background:linear-gradient(135deg,#6366f1,#3b82f6);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
@media print{.no-print{display:none}}
</style>
</head>

<body class="min-h-screen">

<!-- HEADER -->
<header class="no-print max-w-6xl mx-auto px-6 py-6 flex justify-between items-center relative">
  <a href="index.html" class="text-2xl font-black italic uppercase">
    CAREER<span class="text-blue-500">STEPS</span>
  </a>

  <div class="hidden md:flex gap-3">
    <a href="index.html" class="px-4 py-2 text-xs rounded-full bg-white/5">üè† Home</a>
    <button onclick="downloadPDF()" class="px-4 py-2 text-xs font-bold rounded-full bg-white text-black">
      Download PDF
    </button>
  </div>

  <div class="md:hidden">
    <button onclick="toggleMenu()" class="w-10 h-10 rounded-full bg-white/10 text-xl">‚ãÆ</button>
    <div id="mobileMenu" class="hidden absolute right-6 top-20 w-44 glass rounded-xl z-50">
      <a href="index.html" class="block px-4 py-3 text-sm">üè† Home</a>
      <button onclick="downloadPDF()" class="w-full text-left px-4 py-3 text-sm">üìÑ Download PDF</button>
      <a href="assessment.html" class="block px-4 py-3 text-sm">üîÅ Retake Test</a>
    </div>
  </div>
</header>

<!-- MAIN -->
<main class="max-w-5xl mx-auto px-6 pb-24">

<section class="mb-10">
  <span class="text-[10px] uppercase tracking-widest bg-indigo-500/10 px-4 py-2 rounded-full text-indigo-400">
    AI Career Intelligence Report
  </span>
  <h1 class="text-4xl md:text-6xl font-black mt-4">
    Your Future, <span id="displayName" class="gradient-text">Student</span>
  </h1>
  <p id="careerDesc" class="text-slate-400 mt-2"></p>
</section>
<!-- PRIMARY RESULT (SHOW FIRST) -->
<section class="mt-12 mb-16">

  <span id="stageLabel"
        class="block text-xs uppercase tracking-widest text-indigo-400 font-bold mb-2">
  </span>

  <h2 id="careerTitle"
      class="text-3xl md:text-5xl font-black leading-tight">
  </h2>

  <p id="accuracyText"
     class="text-green-400 text-sm font-mono mt-2 mb-6">
  </p>

  <div id="suggestionsGrid"
       class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6">
  </div>

</section>
  <!-- WHY / ROADMAP / SCOPE (SHOW AFTER RESULT) -->
<section class="glass rounded-[2.5rem] p-8 md:p-12 mt-16">

  <h3 class="text-xl font-black mb-4">Why this result?</h3>
  <ul id="whyResult" class="text-slate-300 text-sm space-y-2 mb-8"></ul>

  <h3 class="text-xl font-black mb-4">Recommended Roadmap</h3>
  <ul id="careerRoadmap" class="text-slate-300 text-sm space-y-2 mb-8"></ul>

  <h3 class="text-xl font-black mb-4">Career Scope & Reality</h3>
  <ul id="careerScope" class="text-slate-300 text-sm space-y-2"></ul>

</section>
  <span id="stageLabel" class="text-xs uppercase tracking-widest text-indigo-400 font-bold"></span>

  <h2 id="careerTitle" class="text-3xl md:text-5xl font-black mt-3"></h2>
  <p id="accuracyText" class="text-green-400 text-sm font-mono mt-2"></p>

  <div id="suggestionsGrid" class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6"></div>
</section>
<section class="no-print flex flex-wrap gap-4 justify-center">
  <a href="careers.html" class="px-6 py-3 rounded-xl bg-indigo-600 font-bold text-sm">üîç Explore Careers</a>
  <a href="assessment.html" class="px-6 py-3 rounded-xl bg-white/10 font-bold text-sm">üîÅ Retake Test</a>
  <button onclick="shareResult()" class="px-6 py-3 rounded-xl bg-white/5 font-bold text-sm">üîó Share Result</button>
</section>

</main>

<script>
  window.pdfCareers = [];
  const DB = {
  "10":{
    tech:{title:"Science (PCM)",desc:"Engineering & technical foundation."},
    art:{title:"Science (PCB)",desc:"Medical & life sciences path."},
    business:{title:"Commerce",desc:"Business, finance & economics."},
    social:{title:"Arts / Humanities",desc:"Law, UPSC & social sciences."}
  },
  "12":{
    tech:{title:"Engineering & Technology",desc:"Software, AI, core engineering."},
    art:{title:"Medical & Healthcare",desc:"MBBS, Pharmacy, Biotech."},
    business:{title:"Management & Finance",desc:"MBA, CA, Business careers."},
    social:{title:"Law & Civil Services",desc:"Law, Judiciary, UPSC."}
  }
};
  function calculatePercentages(scoreData){
  const total = Object.values(scoreData).reduce((a,b)=>a+b,0) || 1;
  const perc = {};
  for(const k in scoreData){
    perc[k] = Math.round((scoreData[k] / total) * 100);
  }
    return perc;
  }
    const STREAM_MAP_10 = {
  pcm: {
    label: "Science (PCM)",
    keys: ["tech"],
    desc: "Best for students strong in Maths, Logic, Technology & Problem Solving.",
    careers: ["Engineer", "Data Scientist", "Pilot", "Architect"]
  },
  pcb: {
    label: "Science (PCB)",
    keys: ["social"],
    desc: "Ideal for Biology lovers interested in healthcare & life sciences.",
    careers: ["Doctor", "Psychologist", "Biotechnologist", "Pharmacist"]
  },
  commerce: {
    label: "Commerce",
    keys: ["business"],
    desc: "Suitable for analytical minds interested in business, finance & economics.",
    careers: ["CA", "Investment Banker", "Business Analyst"]
  },
  arts: {
    label: "Arts / Humanities",
    keys: ["art", "social"],
    desc: "Perfect for creative & social thinkers interested in society, law & design.",
    careers: ["Lawyer", "Journalist", "Designer", "Civil Services"]
  }
};
  const STREAM_EXPLANATION_10 = {
  pcm: {
    why: "You show strong logical thinking, numerical ability and problem-solving skills.",
    subjects: "Mathematics, Physics, Computer Science",
    steps: "Choose PCM in Class 11, build strong basics, start exploring engineering & tech careers."
  },
  pcb: {
    why: "You have interest in biology, healthcare and understanding life sciences.",
    subjects: "Biology, Chemistry, Physics",
    steps: "Choose PCB in Class 11, focus on biology concepts, explore medical & healthcare fields."
  },
  commerce: {
    why: "You show analytical thinking and interest in business, money and economics.",
    subjects: "Accountancy, Economics, Business Studies",
    steps: "Choose Commerce in Class 11, strengthen maths & accounts, explore CA/MBA paths."
  },
  arts: {
    why: "You are creative, socially aware and interested in society, law or design.",
    subjects: "Political Science, History, Sociology, Literature",
    steps: "Choose Arts in Class 11, develop communication skills, explore civil services & creative careers."
  }
};
/* ================= UPDATED CAREER DATABASE ================= */
const DB_MAP = {
    // 10th Class
    "tech": { title: "Science (PCM)", desc: "Engineering, Robotics, and Technical foundation." },
    "art": { title: "Fine Arts & Design", desc: "Creative fields, Fashion, and Animation." },
    "business": { title: "Commerce", desc: "Business, Finance, and Economics path." },
    "social": { title: "Humanities / Arts", desc: "Law, Civil Services, and Social Sciences." },
    "neutral": { title: "General Studies", desc: "Liberal Arts and Vocational training." },

    // 12th Class - Combines Stream + Winner
    "arts_art": { title: "Fine Arts & Design Specialist", desc: "Top careers for creative minds in visual arts." },
    "arts_social": { title: "Law & Civil Services", desc: "Top careers in governance, law, and psychology." },
    "arts_tech": { title: "Creative Tech & UI/UX", desc: "Modern careers in digital design and marketing." },
    "pcm_tech": { title: "Core Engineering & AI", desc: "Leading paths in Software, Robotics, and Aerospace." },
    "pcm_business": { title: "Fintech & Product Management", desc: "Careers combining tech expertise with business." },
    "pcb_social": { title: "Medical & Healthcare", desc: "Healing professions including Doctors and Therapists." },
    "pcb_tech": { title: "Bio-Sciences & Research", desc: "Research in Genetics, Biotech, and Lab sciences." },
    "commerce_business": { title: "Finance & Accounting", desc: "High-end careers in CA, Investment Banking, and CFA." },
    "commerce_tech": { title: "Business Analytics", desc: "Careers in Fintech, Data auditing, and Business Intelligence." }
};

const specificCareers = {
    // SCIENCE - PCM
    "pcm_tech": ["Software Developer", "Data Scientist", "Pilot", "Robotics Engineer", "AI Specialist & More..."],
    "pcm_business": ["Product Manager", "Fintech Analyst", "Supply Chain Lead", "Quantitative Trader", "Tech Entrepreneur etc."],
    
    // SCIENCE - PCB
    "pcb_social": ["MBBS Surgeon", "Physiotherapist", "Psychiatrist", "Clinical Nutritionist", "Healthcare Admin etc."],
    "pcb_tech": ["Biotechnologist", "Geneticist", "Pharmacist", "Bio-Medical Engineer", "Forensic Scientist etc."],
    
    // COMMERCE
    "commerce_business": ["Chartered Accountant", "Investment Banker", "Stock Broker", "MBA Finance", "Tax Consultant etc."],
    "commerce_tech": ["Business Intelligence", "Fintech Manager", "Data Auditor", "Forensic Accountant", "E-com Specialist etc."],
    
    // ARTS
    "arts_social": ["Corporate Lawyer", "IAS/IPS Officer", "Psychologist", "Journalist", "Public Policy Expert etc."],
    "arts_art": ["Fashion Designer", "Animator", "Interior Designer", "Photographer", "Architectural Assistant etc."],
    "arts_tech": ["UI/UX Designer", "Digital Marketer", "Game Designer", "Video Editor", "Web Architect etc."],
    
    // DEFAULT
    "neutral": ["Professional Consultant", "Academic Educator", "General Manager", "Govt Service", "Freelance Expert etc."]
};
const WHY_MAP = {
  tech: [
    "You show strong logical & analytical thinking",
    "You enjoy solving structured problems",
    "You prefer technical challenges"
  ],
  business: [
    "You think in terms of growth and decisions",
    "You have leadership & strategy mindset",
    "You understand risk & reward"
  ],
  social: [
    "You are people-oriented and justice driven",
    "You show interest in law, governance & psychology",
    "You prefer responsibility-based careers"
  ],
  art: [
    "You are creative and imaginative",
    "You think visually and emotionally",
    "You prefer originality over structure"
  ]
};

const ROADMAP_MAP = {
  tech: [
    "Graduation: BTech / BE / BSc",
    "Key Exams: JEE / GATE / Certifications",
    "Skills: Coding, Logic, Mathematics",
    "Timeframe: 4‚Äì6 years"
  ],
  business: [
    "Graduation: BCom / BBA / Economics",
    "Key Exams: CA / CAT / CFA",
    "Skills: Finance, Analysis, Strategy",
    "Timeframe: 3‚Äì5 years"
  ],
  social: [
    "Graduation: BA / LLB",
    "Key Exams: CLAT / Judiciary / UPSC",
    "Skills: Writing, Ethics, Critical Thinking",
    "Timeframe: 3‚Äì7 years"
  ],
  art: [
    "Graduation: Design / Fine Arts / Media",
    "Selection: Portfolio-based",
    "Skills: Creativity & Tools",
    "Timeframe: Skill-dependent"
  ]
};

const SCOPE_MAP = {
  tech: [
    "Entry: ‚Çπ6‚Äì10 LPA",
    "Mid: ‚Çπ15‚Äì30 LPA",
    "Top: ‚Çπ50 LPA+",
    "Stability: High"
  ],
  business: [
    "Entry: ‚Çπ5‚Äì9 LPA",
    "Mid: ‚Çπ15‚Äì40 LPA",
    "Top: Unlimited",
    "Stability: Medium‚ÄìHigh"
  ],
  social: [
    "Entry: ‚Çπ5‚Äì8 LPA",
    "Mid: ‚Çπ12‚Äì25 LPA",
    "Top: ‚Çπ30 LPA+",
    "Stability: Very High"
  ],
  art: [
    "Entry: ‚Çπ3‚Äì6 LPA",
    "Mid: ‚Çπ8‚Äì20 LPA",
    "Top: Skill-based",
    "Stability: Depends on skill"
  ]
};

/* ================= PAGE DATA LOAD LOGIC ================= */
window.onload = () => {
    const name = localStorage.getItem("user_name") || "Student";
    const stage = localStorage.getItem("academic_stage") || "10";
    const resultKey = localStorage.getItem("careerResult") || "neutral";
    const scoreData = JSON.parse(localStorage.getItem("scoreData") || "{}");
    const percentages = calculatePercentages(scoreData);

    document.getElementById("displayName").innerText = name;
    
    // Clear old data safely
    const clearUI = () => {
        document.getElementById("whyResult").innerHTML = "";
        document.getElementById("careerRoadmap").innerHTML = "";
        document.getElementById("careerScope").innerHTML = "";
    };

    if (stage === "10") {
        clearUI();
        const streamScores = [];
        for (const key in STREAM_MAP_10) {
            const stream = STREAM_MAP_10[key];
            let score = stream.keys.reduce((acc, k) => acc + (scoreData[k] || 0), 0);
            streamScores.push({ ...stream, score, key });
        }
        streamScores.sort((a, b) => b.score - a.score);

        const best = streamScores[0];
        window.bestStreamPDF = best.label;
        window.pdfCareers = best.careers;

        document.getElementById("careerTitle").innerText = "Recommended Streams (Post-10)";
        document.getElementById("careerDesc").innerText = "Based on aptitude, interests & thinking pattern:";
        
        // 10th Specific WHY/Roadmap logic
        const info = STREAM_EXPLANATION_10[best.key];
        document.getElementById("whyResult").innerHTML = `<li>‚Ä¢ ${info.why}</li>`;
        document.getElementById("careerRoadmap").innerHTML = `<li>‚Ä¢ ${info.steps}</li>`;
        document.getElementById("careerScope").innerHTML = `<li>‚Ä¢ Key Subjects: ${info.subjects}</li>`;

        const grid = document.getElementById("suggestionsGrid");
        grid.innerHTML = streamScores.map((s, i) => `
            <div class="glass p-5 rounded-xl border ${i === 0 ? "border-indigo-500 shadow-lg shadow-indigo-500/10" : "border-white/10"}">
                <div class="text-[10px] font-bold ${i === 0 ? "text-indigo-400" : "text-slate-500"} uppercase tracking-tighter">
                    ${i === 0 ? "‚òÖ Best Match" : "Match Option"}
                </div>
                <div class="text-xl font-black mt-1">${s.label}</div>
                <div class="text-slate-400 text-sm mt-2">${s.desc}</div>
                <div class="text-indigo-300 text-xs font-bold mt-3">Careers: ${s.careers.join(", ")}</div>
            </div>
        `).join('');

    } else {
        // 12th LOGIC
        clearUI();
        const trait = resultKey.includes("_") ? resultKey.split("_")[1] : resultKey;
        const mainResult = DB_MAP[resultKey] || DB_MAP["neutral"];

        document.getElementById("careerTitle").innerText = mainResult.title;
        document.getElementById("careerDesc").innerText = mainResult.desc;
        document.getElementById("accuracyText").innerText = `Match Accuracy: ${percentages[trait] || 0}%`;
        window.bestStreamPDF = mainResult.title;

        // Populate 3-Section Data
        WHY_MAP[trait]?.forEach(t => document.getElementById("whyResult").innerHTML += `<li>‚Ä¢ ${t}</li>`);
        ROADMAP_MAP[trait]?.forEach(t => document.getElementById("careerRoadmap").innerHTML += `<li>‚Ä¢ ${t}</li>`);
        SCOPE_MAP[trait]?.forEach(t => document.getElementById("careerScope").innerHTML += `<li>‚Ä¢ ${t}</li>`);

        const careers = specificCareers[resultKey] || specificCareers["neutral"];
        window.pdfCareers = careers;
        
        document.getElementById("suggestionsGrid").innerHTML = careers.map((c, i) => `
            <div class="glass p-5 rounded-xl border border-white/5 hover:border-indigo-500/50 transition">
                <div class="text-indigo-400 font-bold text-xs mb-1">PATHWAY 0${i + 1}</div>
                <div class="font-bold text-lg">${c}</div>
            </div>
        `).join('');
    }
};


/* ================= ADVANCED PDF ================= */
function downloadPDF(){
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF("p","mm","a4");

  const name  = localStorage.getItem("user_name") || "Student";
  const stage = localStorage.getItem("academic_stage") || "10";
  const bestStream = window.bestStreamPDF || "Recommended Stream";
  const desc = stage === "10"
  ? "Based on aptitude & interest analysis, this stream is the most suitable."
  : document.getElementById("careerDesc").innerText;

  /* Header Bar */
  doc.setFillColor(30,64,175);
  doc.rect(0,0,210,25,"F");
  doc.setTextColor(255);
  doc.setFontSize(18);
  doc.text("CareerSteps ‚Äì AI Career Report",105,16,{align:"center"});

  let y = 40;
  doc.setTextColor(0);

  doc.setFontSize(11);
  doc.text(`Name: ${name}`,20,y); y+=7;
  doc.text(stage==="10"?"Level: Post-10":"Level: Post-12",20,y); y+=10;

  doc.setFontSize(14);
  doc.text("Primary Recommendation",20,y); y+=8;

  doc.setFontSize(13);
  doc.setTextColor(30,64,175);
  doc.text(bestStream,20,y); 
y += 8;

  doc.setFontSize(11);
  doc.setTextColor(0);
  doc.text(desc,20,y,{maxWidth:170});
  // PDF mein careers list add karne ke liye (yahan se copy karein)
  y += 15;
  doc.setFontSize(12);
  doc.setTextColor(30, 64, 175);
  doc.text("Top 5 Professional Pathways:", 20, y);
  y += 8;

  doc.setFontSize(10);
  doc.setTextColor(50, 50, 50);
  
  // Grid se careers utha kar PDF mein daalna
  const careers = window.pdfCareers || [];

careers.forEach((career, index) => {
  doc.text(`${index + 1}. ${career}`, 25, y);
  y += 7;
});

  /* Watermark */
  doc.setFontSize(45);
  doc.setTextColor(220);
  doc.text("CareerSteps",105,170,{align:"center",angle:30});

  /* Footer */
  doc.setFontSize(9);
  doc.setTextColor(0);
  doc.text("Generated by CareerSteps AI ‚Ä¢ careersteps.in",105,290,{align:"center"});

  doc.save(`CareerSteps_Report_${name}.pdf`);
}

/* ================= UI HELPERS ================= */
function toggleMenu(){
  document.getElementById("mobileMenu").classList.toggle("hidden");
}

function shareResult(){
  const text = `My CareerSteps result: ${document.getElementById("careerTitle").innerText}`;
  if(navigator.share){
    navigator.share({title:"CareerSteps Result",text,url:location.href});
  }else{
    navigator.clipboard.writeText(text+" "+location.href);
    alert("Result copied");
  }
}
</script>

</body>
</html>
