<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CareerSteps ‚Äì AI Neural Report</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
body{background:#020617;color:#fff;font-family:'Plus Jakarta Sans',sans-serif;}
.main-card{background:#111827;border-radius:32px;border:1px solid rgba(255,255,255,.05);}
.status-badge{background:rgba(16,185,129,.1);color:#10b981;border:1px solid rgba(16,185,129,.2);}
.chart-container{background:rgba(255,255,255,.02);border-radius:24px;border:1px solid rgba(255,255,255,.05);padding:20px;margin:0 auto 24px auto;max-width:400px;}
.badge-gold{background:linear-gradient(90deg,#f59e0b,#fbbf24);color:#000;font-weight:800;border-radius:999px;}
.career-tag{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);padding:4px 10px;border-radius:8px;font-size:10px;color:#94a3b8;}

@media print{
.no-print{display:none!important;}
body{background:#fff!important;color:#000!important;}
.main-card{background:#fff!important;border:none!important;}
}
</style>
</head>

<body class="p-4 md:p-10">
<div id="reportArea" class="max-w-2xl mx-auto">

<div class="main-card p-6 md:p-8 shadow-2xl relative">

<!-- HEADER -->
<div class="flex justify-between items-center mb-8 no-print">
  <a href="index.html" class="hover:opacity-80 transition">
    <h1 class="text-xl font-black italic uppercase text-indigo-500">
      CAREER<span class="text-white">STEPS</span>
    </h1>
  </a>

  <div class="flex gap-2">
    <a href="index.html" class="px-3 py-2 bg-white/5 rounded-lg text-xs font-bold uppercase hover:bg-white/10 transition">
      Home
    </a>
    <button onclick="downloadPDF()" class="p-2 bg-white/5 rounded-lg border border-white/10 hover:bg-white/10 transition" title="Download PDF">
      ‚¨áÔ∏è
    </button>
    <button onclick="shareResult()" class="px-6 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-xl text-[10px] font-black uppercase tracking-widest transition">
      Share Report
    </button>
  </div>
</div>

<!-- TITLE -->
<div class="text-center mb-8">
  <span class="status-badge px-4 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider italic">
    Assessment Complete
  </span>
  <h2 class="text-3xl font-black mt-4 uppercase italic">
    Your Recommended <span class="text-indigo-500">Streams</span>
  </h2>
  <p id="userNameDisplay" class="text-slate-400 text-sm mt-2 italic"></p>
</div>

<!-- CHART -->
<div class="chart-container">
  <canvas id="aptitudeChart"></canvas>
</div>
<p class="text-center text-[10px] text-slate-500 italic mb-6">
  Personality & aptitude distribution based on your responses
</p>

<!-- STREAM LIST -->
<div id="streamList" class="space-y-6"></div>

<!-- CTA -->
<div class="mt-10 text-center bg-white/5 p-8 rounded-3xl border border-white/10 no-print">
  <h3 class="font-bold text-lg mb-2 italic uppercase">Explore Your Horizon</h3>
  <p class="text-slate-400 text-xs mb-6 italic">
    Discover the full spectrum of professional possibilities.
  </p>
  <div class="flex flex-col md:flex-row gap-4 justify-center">
    <a href="careers.html" class="px-8 py-4 bg-indigo-600 hover:bg-indigo-500 rounded-2xl font-black text-xs uppercase tracking-widest">
      Explore 900+ Careers
    </a>
    <a href="assessment.html" class="px-8 py-4 bg-slate-800 rounded-2xl font-black text-xs uppercase tracking-widest border border-white/5 hover:bg-slate-700">
      Retake Scan
    </a>
  </div>
</div>

</div>
</div>

<script>
const name = localStorage.getItem("user_name") || "Explorer";
const stage = localStorage.getItem("academic_stage") || "10";
const scoreData = JSON.parse(localStorage.getItem("scoreData")) || {
technical:4,finance:3,social:2,creative:5
};

document.getElementById("userNameDisplay").innerText =
`System Analysis for ${name} (Post-${stage}th)`;

/* CONTENT DB (UNCHANGED LOGIC) */
const contentDB={
"10":{
technical:{title:"Science Stream",icon:"üß™",desc:"For curious minds who love exploration and experimentation.",careers:["Doctor","Engineer","Researcher","Data Scientist"],steps:["Focus on PCM/PCB","Science projects"]},
finance:{title:"Commerce Stream",icon:"üìä",desc:"Ideal for finance, business and management thinking.",careers:["CA","CS","Manager","Economist"],steps:["Accounts & Economics","CA/IPMAT prep"]},
social:{title:"Humanities Stream",icon:"üèõÔ∏è",desc:"Best for social awareness and governance roles.",careers:["Lawyer","IAS","Psychologist","Journalist"],steps:["History/Pol Sci","Debates & writing"]},
creative:{title:"Fine Arts Stream",icon:"üé®",desc:"Perfect for visual creativity and design.",careers:["Designer","Animator","Architect"],steps:["Build portfolio","Design workshops"]}
}
};

/* RENDER */
function render(){
const list=document.getElementById("streamList");
const sorted=Object.keys(scoreData).sort((a,b)=>scoreData[b]-scoreData[a]);
list.innerHTML="";

sorted.forEach((key,i)=>{
const item=contentDB[stage][key];
const isTop=i===0;
const percent=Math.min(100,Math.round(scoreData[key]*10));

list.innerHTML+=`
<a href="careers.html?stream=${key}" class="block hover:scale-[1.01] transition">
<div class="relative p-6 rounded-3xl border ${isTop?'border-indigo-500 bg-indigo-500/5':'border-white/5 bg-white/2'}">

${isTop?
`<div class="absolute top-4 left-4 bg-yellow-400 text-black text-[10px] px-4 py-1 rounded-full font-black uppercase tracking-widest shadow">
BEST MATCH
</div>`:
`<div class="absolute top-4 left-4 bg-white/10 text-slate-300 text-[10px] px-4 py-1 rounded-full font-bold uppercase tracking-widest">
Strong Alternative
</div>`}

<div class="flex gap-4 mb-4">
<div class="text-3xl p-3 bg-white/5 rounded-xl">${item.icon}</div>
<div class="flex-1">
<div class="flex justify-between">
<h4 class="text-lg font-bold italic uppercase">${item.title}</h4>
<div class="text-right">
<span class="text-indigo-400 font-black text-xl">${percent}%</span>
<p class="text-[8px] text-slate-500 uppercase font-bold">Match Accuracy</p>
</div>
</div>
<p class="text-slate-400 text-xs mt-1">${item.desc}</p>
<p class="text-[10px] text-indigo-300 mt-2 italic">
Why this stream? ${isTop?"Highest alignment with your aptitude.":"Secondary but viable option."}
</p>
</div>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t border-white/5">
<div>
<p class="text-[10px] font-black uppercase text-slate-500 mb-2">Popular Careers</p>
<div class="flex flex-wrap gap-2">
${item.careers.map(c=>`<span class="career-tag">${c}</span>`).join("")}
</div>
</div>
<div>
<p class="text-[10px] font-black uppercase text-slate-500 mb-2">Next Steps</p>
<ul class="space-y-1">
${item.steps.map(s=>`<li class="text-[10px] text-slate-400">‚Ä¢ ${s}</li>`).join("")}
</ul>
</div>
</div>

</div>
</a>
`;
});
}

/* CHART */
new Chart(document.getElementById("aptitudeChart"),{
type:"radar",
data:{labels:["Technical","Finance","Social","Creative"],
datasets:[{data:Object.values(scoreData),backgroundColor:"rgba(99,102,241,.2)",borderColor:"#6366f1",borderWidth:3}]},
options:{plugins:{legend:{display:false}},scales:{r:{ticks:{display:false}}}}
});

/* SHARE */
function shareResult(){
const top=Object.keys(scoreData).sort((a,b)=>scoreData[b]-scoreData[a])[0];
const txt=`My top career stream is ${contentDB[stage][top].title} via CareerSteps AI.`;
navigator.share?navigator.share({text:txt,url:location.href}):alert("Copy link manually");
}

/* PDF */
function downloadPDF(){
html2pdf().from(document.getElementById("reportArea")).save(`${name}_CareerSteps_Report.pdf`);
}

render();
</script>
</body>
</html>
