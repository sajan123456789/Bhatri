<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CareerSteps | AI Career Report</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
body{
  background:#020617;
  color:#fff;
  font-family:'Plus Jakarta Sans',sans-serif;
}
.glass{
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.08);
  backdrop-filter:blur(14px);
}
.gradient-text{
  background:linear-gradient(135deg,#6366f1,#3b82f6);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
@media print{.no-print{display:none}}
</style>
</head>

<body class="min-h-screen">

<!-- HEADER -->
<header class="no-print max-w-6xl mx-auto px-6 py-6 flex justify-between items-center relative">
  <a href="index.html" class="text-2xl font-black italic uppercase">
    CAREER<span class="text-blue-500">STEPS</span>
  </a>

  <div class="hidden md:flex gap-3">
    <a href="index.html" class="px-4 py-2 text-xs rounded-full bg-white/5">üè† Home</a>
    <button onclick="downloadPDF()" class="px-4 py-2 text-xs font-bold rounded-full bg-white text-black">
      Download PDF
    </button>
  </div>

  <div class="md:hidden">
    <button onclick="toggleMenu()" class="w-10 h-10 rounded-full bg-white/10 text-xl">‚ãÆ</button>
    <div id="mobileMenu" class="hidden absolute right-6 top-20 w-44 glass rounded-xl z-50">
      <a href="index.html" class="block px-4 py-3 text-sm">üè† Home</a>
      <button onclick="downloadPDF()" class="w-full text-left px-4 py-3 text-sm">üìÑ Download PDF</button>
      <a href="assessment.html" class="block px-4 py-3 text-sm">üîÅ Retake Test</a>
    </div>
  </div>
</header>

<!-- MAIN -->
<main class="max-w-5xl mx-auto px-6 pb-24">

<section class="mb-10">
  <span class="text-[10px] uppercase tracking-widest bg-indigo-500/10 px-4 py-2 rounded-full text-indigo-400">
    AI Career Intelligence Report
  </span>
  <h1 class="text-4xl md:text-6xl font-black mt-4">
    Your Future, <span id="displayName" class="gradient-text">Student</span>
  </h1>
  <p id="careerDesc" class="text-slate-400 mt-2"></p>
</section>

<section class="glass rounded-[2.5rem] p-8 md:p-12 mb-8">
  <span id="stageLabel" class="text-xs uppercase tracking-widest text-indigo-400 font-bold"></span>

  <h2 id="careerTitle" class="text-3xl md:text-5xl font-black mt-3"></h2>
  <p id="accuracyText" class="text-green-400 text-sm font-mono mt-2"></p>

  <div id="suggestionsGrid" class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6"></div>
</section>

<section class="no-print flex flex-wrap gap-4 justify-center">
  <a href="careers.html" class="px-6 py-3 rounded-xl bg-indigo-600 font-bold text-sm">üîç Explore Careers</a>
  <a href="assessment.html" class="px-6 py-3 rounded-xl bg-white/10 font-bold text-sm">üîÅ Retake Test</a>
  <button onclick="shareResult()" class="px-6 py-3 rounded-xl bg-white/5 font-bold text-sm">üîó Share Result</button>
</section>

</main>

<script>
/* ===== PAGE DATA LOAD ===== */
window.onload = () => {
  const name  = localStorage.getItem("user_name") || "Student";
  const stage = localStorage.getItem("academic_stage") || "10";
  const result = localStorage.getItem("careerResult") || "business";

  document.getElementById("displayName").innerText = name;

  const accuracy = Math.floor(88 + Math.random()*8);
  document.getElementById("accuracyText").innerText = `Match Accuracy: ${accuracy}%`;

  const DB = {
    "10":{
      tech:{title:"Science (PCM)",desc:"Best for engineering & technical careers."},
      art:{title:"Science (PCB)",desc:"Medical & life science pathways."},
      business:{title:"Commerce",desc:"Business, finance & economics fields."},
      social:{title:"Arts / Humanities",desc:"Law, UPSC & social sciences."}
    },
    "12":{
      tech:{title:"Engineering & Technology",desc:"Software, AI, core engineering careers."},
      art:{title:"Medical & Healthcare",desc:"MBBS, Pharmacy, Nursing, Biotech."},
      business:{title:"Management & Finance",desc:"MBA, CA, Business, Economics."},
      social:{title:"Law & Civil Services",desc:"Law, UPSC, policy careers."}
    }
  };

  document.getElementById("stageLabel").innerText =
    stage === "10" ? "Post-10 Stream Recommendation" : "Post-12 Career Recommendation";

  const main = DB[stage][result] || DB[stage].business;

  document.getElementById("careerTitle").innerText = main.title;
  document.getElementById("careerDesc").innerText = main.desc;

  const grid = document.getElementById("suggestionsGrid");
  grid.innerHTML = "";

  Object.values(DB[stage]).forEach((c,i)=>{
    grid.innerHTML += `
      <div class="glass p-5 rounded-xl ${c.title===main.title?'border border-indigo-500/50':''}">
        <div class="font-bold">${i+1}. ${c.title}</div>
        <div class="text-slate-400 text-sm">${c.desc}</div>
      </div>`;
  });
};

/* ===== PDF DOWNLOAD (FIXED) ===== */
function downloadPDF(){
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF("p","mm","a4");

  const name = localStorage.getItem("user_name") || "Student";
  const stage = localStorage.getItem("academic_stage") || "10";
  const title = document.getElementById("careerTitle").innerText;
  const desc  = document.getElementById("careerDesc").innerText;

  let y = 20;

  doc.setFontSize(18);
  doc.text("CareerSteps ‚Äì AI Career Report",20,y); y+=10;

  doc.setFontSize(11);
  doc.text(`Name: ${name}`,20,y); y+=7;
  doc.text(stage==="10"?"Level: Post-10":"Level: Post-12",20,y); y+=10;

  doc.setFontSize(14);
  doc.text("Recommendation:",20,y); y+=8;

  doc.setFontSize(12);
  doc.text(title,20,y); y+=8;

  doc.setFontSize(11);
  doc.text(desc,20,y,{maxWidth:170});

  doc.setFontSize(40);
  doc.setTextColor(230);
  doc.text("CareerSteps",105,160,{align:"center",angle:30});
  doc.setTextColor(0);

  doc.setFontSize(9);
  doc.text("Generated by CareerSteps AI ‚Ä¢ careersteps.in",20,285);

  doc.save(`CareerSteps_Report_${name}.pdf`);
}

/* ===== UI HELPERS ===== */
function toggleMenu(){
  document.getElementById("mobileMenu").classList.toggle("hidden");
}

function shareResult(){
  const text = `My CareerSteps result: ${document.getElementById("careerTitle").innerText}`;
  if(navigator.share){
    navigator.share({title:"CareerSteps Result",text,url:location.href});
  }else{
    navigator.clipboard.writeText(text+" "+location.href);
    alert("Result copied");
  }
}
</script>

</body>
</html>
