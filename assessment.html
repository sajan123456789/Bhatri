<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CareerSteps ‚Äì AI Neural Assessment</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
    body { background:#020617; color:#fff; font-family:'Plus Jakarta Sans',sans-serif; overflow-x:hidden; }
    .glass { background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.08); backdrop-filter:blur(12px); }
    /* Padding aur spacing badha di gayi hai */
    .option-btn { 
        background:rgba(30, 41, 59, 0.4); 
        border:1px solid rgba(255,255,255,0.05); 
        transition:0.3s cubic-bezier(0.4, 0, 0.2, 1); 
        cursor: pointer; 
        padding: 1.25rem 1.5rem; 
        margin-bottom: 0.75rem;
    }
    .option-btn:hover { border-color:#6366f1; background: rgba(99, 102, 241, 0.1); transform: translateX(5px); }
    .progress-fill { transition: width 0.8s ease-in-out; background: linear-gradient(90deg, #6366f1, #3b82f6); }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
    .status-dot { width: 8px; height: 8px; background: #22c55e; border-radius: 50%; display: inline-block; animation: pulse 2s infinite; }
</style>
</head>
<body class="min-h-screen flex flex-col">

<header class="max-w-6xl mx-auto w-full py-6 px-6 flex justify-between items-center">
  <a href="index.html" class="flex items-center gap-2 transition-transform active:scale-95">
    <h1 class="text-2xl font-black italic tracking-tighter uppercase">
      CAREER<span class="text-blue-500">STEPS</span>
      <span class="hidden sm:inline-block text-[9px] bg-indigo-500/20 px-2 py-1 rounded text-white ml-2 uppercase tracking-widest font-bold">Neural Core v4.5</span>
    </h1>
  </a>
  <div class="flex items-center gap-3">
    <div class="status-dot"></div>
    <span class="text-[10px] font-bold text-slate-400 uppercase tracking-widest hidden md:block">Neural Link: Active</span>
  </div>
</header>

<main class="flex-grow flex items-center justify-center px-4 pb-12">
    
    <section id="nameSection" class="max-w-lg w-full glass rounded-[2.5rem] p-8 md:p-10 text-center">
        <div class="text-indigo-500 text-[10px] font-black tracking-[0.5em] mb-4 uppercase">Identity Protocol</div>
        <h2 class="text-3xl font-extrabold mb-6">Who is scanning?</h2>
        <input id="userName" type="text" placeholder="Enter Full Name..." class="w-full bg-white/5 border border-white/10 p-5 rounded-2xl text-center text-lg mb-6 outline-none focus:border-indigo-500 transition-all font-bold tracking-wide">
        <button onclick="saveName()" class="w-full bg-indigo-600 hover:bg-indigo-500 py-5 rounded-2xl font-black uppercase tracking-widest transition-all active:scale-95">Initialize Engine ‚Üí</button>
    </section>

    <section id="selectClass" class="hidden max-w-lg w-full glass rounded-[2.5rem] p-10 text-center">
        <!-- üîµ NEW: 12th STREAM SELECTION -->
<section id="streamSelect" class="hidden max-w-lg w-full glass rounded-[2.5rem] p-10 text-center">
  <h2 class="text-2xl font-bold mb-4">Which stream did you take in Class 11?</h2>
  <p class="text-slate-500 text-[10px] uppercase font-bold mb-8">
    This helps us show correct careers
  </p>

  <div class="space-y-4">
    <button onclick="selectStream('pcm')" class="w-full py-4 glass rounded-xl">Science (PCM)</button>
    <button onclick="selectStream('pcb')" class="w-full py-4 glass rounded-xl">Science (PCB)</button>
    <button onclick="selectStream('commerce')" class="w-full py-4 glass rounded-xl">Commerce</button>
    <button onclick="selectStream('arts')" class="w-full py-4 glass rounded-xl">Arts / Humanities</button>
  </div>
</section>
        <h2 id="welcomeText" class="text-2xl font-bold mb-2"></h2>
        <p class="text-slate-500 text-[10px] font-black tracking-widest mb-10 uppercase">Select Data Model</p>
        <div class="space-y-4">
            <button onclick="startAI('10')" class="w-full py-6 glass border border-white/10 rounded-2xl hover:border-indigo-500 transition-all text-left px-8 group">
                <div class="text-indigo-400 font-black text-lg group-hover:translate-x-2 transition">Post-10th Stream Selection</div>
                <div class="text-[9px] text-slate-500 mt-1 uppercase font-bold tracking-widest">Aptitude & Interest Alignment</div>
            </button>
            <button onclick="startAI('12')" class="w-full py-6 glass border border-white/10 rounded-2xl hover:border-blue-500 transition-all text-left px-8 group">
                <div class="text-blue-400 font-black text-lg group-hover:translate-x-2 transition">Post-12th Career Path</div>
                <div class="text-[9px] text-slate-500 mt-1 uppercase font-bold tracking-widest">Market Fit & Professional IQ</div>
            </button>
        </div>
    </section>

    <section id="quiz" class="hidden max-w-2xl w-full glass rounded-[2.5rem] p-6 md:p-10">
        <div class="flex justify-between items-center mb-8">
            <div class="flex-grow mr-6">
                <p id="progressText" class="text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-2">Mapping Node...</p>
                <div class="w-full h-1 bg-white/5 rounded-full overflow-hidden">
                    <div id="progressBar" class="progress-fill h-full w-0"></div>
                </div>
            </div>
            <div class="text-[9px] px-3 py-1 bg-white/5 rounded border border-white/10 font-bold text-slate-400 uppercase">Live Scan</div>
        </div>
        
        <h3 id="questionBox" class="text-xl md:text-2xl font-bold mb-10 leading-relaxed tracking-tight"></h3>
        <div id="optionsBox" class="flex flex-col"></div>
    </section>
</main>

<script>
let currentStep = 0;
let scoreData = { tech: 0, business: 0, social: 0, art: 0, neutral: 0 };
let currentQuestions = [];

const AI_DATABASE = {
    "10": [
        {q: "A complex machine stops working. What's your first move?", o:["Analyze the internal circuits","Check if it's profitable to fix","Gather a team to brainstorm","Sketch a more beautiful design","None of the above"], tags:["tech","business","social","art","neutral"]},
        {q: "If you could own a futuristic company, it would be:", o:["AI & Robotics Lab","Global Stock Exchange","Human Rights Organization","Digital Art Studio","Something else"], tags:["tech","business","social","art","neutral"]},
        {q: "What do you do when you find a bug in a game?", o:["Try to find the code error","Think of how to sell the fix","Tell all your friends about it","Enjoy the weird visual glitch","I don't care"], tags:["tech","business","social","art","neutral"]},
        {q: "Which world would you like to live in?", o:["A high-tech digital utopia","A booming economic center","A peaceful social community","A colorful creative paradise","None of these"], tags:["tech","business","social","art","neutral"]},
        {q: "Pick a secret skill you want:", o:["Instantly fix any hardware","Know exactly where to invest","Read anyone's thoughts","Create music from thin air","Not sure"], tags:["tech","business","social","art","neutral"]},
        {q: "How do you handle a big problem?", o:["Break it into logical steps","Find the most efficient way","Ask for expert advice","Look for a creative shortcut","I avoid problems"], tags:["tech","business","social","art","neutral"]},
        {q: "Your favorite subject in school usually involves:", o:["Formulae and Logic","Data and Money","People and History","Colors and Imagination","None of these"], tags:["tech","business","social","art","neutral"]},
        {q: "What makes a project 'Great'?", o:["Technical perfection","Financial success","Helping the society","Originality and Vibe","I don't know"], tags:["tech","business","social","art","neutral"]},
        {q: "In a group, people see you as:", o:["The Problem Solver","The Decision Maker","The Peace Maker","The Creative Mind","Just a member"], tags:["tech","business","social","art","neutral"]},
        {q: "Your final goal in life is to:", o:["Invent something new","Build a business empire","Change people's lives","Create a masterpiece","I haven't decided"], tags:["tech","business","social","art","neutral"]}
    ],
    "12": [
        {q: "AI has automated 50% of tasks. You survive by:", o:["Programming the AI itself","Managing the new economy","Leading human-led law","Designing the AI experience","I don't know yet"], tags:["tech","business","social","art","neutral"]},
        {q: "The world's biggest engine is actually:", o:["Scientific Innovation","Cash Flow & Capital","Social Policies & Trust","Visual Culture & Arts","None of above"], tags:["tech","business","social","art","neutral"]},
        {q: "If you had $1 Billion, you would:", o:["Build a Mars Colony","Start a Global Bank","End world hunger","Build the world's largest Museum","Save it"], tags:["tech","business","social","art","neutral"]},
        {q: "Which crisis is most urgent?", o:["Cybersecurity Threats","Global Market Crash","Broken Education System","Loss of Human Culture","Not sure"], tags:["tech","business","social","art","neutral"]},
        {q: "Your dream work environment is:", o:["A silent lab with high-end PCs","A fast-paced trading floor","A NGO camp helping people","A vibrant studio with music","Work from home"], tags:["tech","business","social","art","neutral"]},
        {q: "A product is only successful if it is:", o:["Bug-free and powerful","Making massive profit","Sustainable for society","Visually stunning","Depends on the product"], tags:["tech","business","social","art","neutral"]},
        {q: "What keeps you curious?", o:["How things work inside","How to scale a business","Why people act that way","How to express an idea","Nothing much"], tags:["tech","business","social","art","neutral"]},
        {q: "Your 'Executive' style would be:", o:["Logical & Data-driven","Aggressive & Result-oriented","Empathetic & Collaborative","Visionary & Unconventional","Neutral"], tags:["tech","business","social","art","neutral"]},
        {q: "If you wrote a book, it would be about:", o:["The Future of Tech","How to Get Rich","Improving the World","A Visual Journey","I won't write"], tags:["tech","business","social","art","neutral"]},
        {q: "Pick your final legacy:", o:["A patent in your name","A brand that lives on","A law that helps millions","A work of art that inspires","Still searching"], tags:["tech","business","social","art","neutral"]}
    ]
};

function saveName() {
    const val = document.getElementById("userName").value.trim();
    if(val.length < 2) return alert("Please enter your full name.");
    localStorage.setItem("user_name", val);
    document.getElementById("nameSection").classList.add("hidden");
    document.getElementById("selectClass").classList.remove("hidden");
    document.getElementById("welcomeText").innerText = `Access Granted: ${val}`;
}

function startAI(type) {
    localStorage.setItem("academic_stage", type);
    document.getElementById("selectClass").classList.add("hidden");

    if(type === "12"){
        // üîµ Post-12: stream first
        document.getElementById("streamSelect").classList.remove("hidden");
        return;
    }

    // ‚úÖ Post-10: direct test
    currentQuestions = AI_DATABASE[type];
    document.getElementById("quiz").classList.remove("hidden");
    loadNeuralNode();
}
/* üîµ Post-12 stream handler */
function selectStream(stream){
  localStorage.setItem("selected_stream", stream);

  document.getElementById("streamSelect").classList.add("hidden");
  document.getElementById("quiz").classList.remove("hidden");

  currentQuestions = AI_DATABASE["12"];
  loadNeuralNode();
}
function loadNeuralNode() {
    const total = currentQuestions.length;
    const progress = (currentStep / total) * 100;
    document.getElementById("progressBar").style.width = `${progress}%`;
    document.getElementById("progressText").innerText = `Scanning Node 0${currentStep + 1} / 10`;
    
    document.getElementById("questionBox").innerText = currentQuestions[currentStep].q;
    const box = document.getElementById("optionsBox");
    box.innerHTML = "";
    
    currentQuestions[currentStep].o.forEach((opt, i) => {
        const btn = document.createElement("button");
        btn.className = "option-btn w-full rounded-2xl font-semibold text-left flex justify-between items-center group text-base leading-relaxed";
        btn.innerHTML = `
            <span class="pr-4">${opt}</span>
            <span class="text-[9px] opacity-30 group-hover:opacity-100 transition-all font-bold">ANALYZE ‚Üí</span>
        `;
        btn.onclick = () => processInput(currentQuestions[currentStep].tags[i]);
        box.appendChild(btn);
    });
}

function processInput(tag) {
    scoreData[tag]++;
    currentStep++;
    if(currentStep < currentQuestions.length) {
        loadNeuralNode();
    } else {
        localStorage.setItem("scoreData", JSON.stringify(scoreData));
        processFinalReport();
    }
}
function processFinalReport() {
    document.getElementById("quiz").innerHTML = `
        <div class="text-center py-24">
            <div class="w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-6"></div>
            <h2 class="text-xl font-bold">Analyzing Neural Patterns...</h2>
            <p class="text-[10px] text-slate-500 tracking-[0.3em] mt-3 uppercase">
              Mapping Career Matrices
            </p>
        </div>`;

    (async () => {
      await window.saveTestData({
        name: localStorage.getItem("user_name"),
        class: localStorage.getItem("academic_stage"),
        scores: scoreData,
        finalResult: Object.keys(scoreData).reduce((a, b) =>
          scoreData[a] > scoreData[b] ? a : b
        ),
        device: navigator.userAgent
      });

      setTimeout(() => {
        const winner = Object.keys(scoreData).reduce((a, b) =>
          scoreData[a] > scoreData[b] ? a : b
        );
        localStorage.setItem("careerResult", winner);
        window.location.href = "result.html";
      }, 2000);
    })();
}

</script>
    <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-analytics.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBm-B0nhpfBt776iDZJuQRplNrOhy9xdiY",
    authDomain: "careersteps-afa5d.firebaseapp.com",
    projectId: "careersteps-afa5d",
    storageBucket: "careersteps-afa5d.firebasestorage.app",
    messagingSenderId: "197033973372",
    appId: "1:197033973372:web:b5c6ad50bf8f68aee5dbf9",
    measurementId: "G-90SZVYJ200"
  };

  // Init
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const db = getFirestore(app);

  // üî¥ IMPORTANT: ye function GLOBAL banana hai
  window.saveTestData = async function(data){
    try{
      await addDoc(collection(db, "testResults"), {
        ...data,
        createdAt: serverTimestamp()
      });
      console.log("‚úÖ Data saved");
    }catch(e){
      console.error("‚ùå Error", e);
    }
  }
    </script>
</body>
</html>
