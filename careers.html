<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Career Directory | CareerSteps</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
    body{background:#020617;color:#f8fafc;font-family:'Plus Jakarta Sans',sans-serif;scroll-behavior:smooth}
    .glass-card{background:rgba(15,23,42,.6);border:1px solid rgba(51,65,85,.3);backdrop-filter:blur(12px);border-radius:24px;transition:.3s}
    .filter-select { background: #0f172a; border: 1px solid #1e293b; color: #94a3b8; padding: 12px; border-radius: 12px; width: 100%; appearance: none; cursor: pointer; }
    .filter-select:focus { border-color: #3b82f6; outline: none; }
    .label-text { font-size: 11px; font-weight: 800; text-transform: uppercase; color: #64748b; margin-bottom: 8px; display: block; }
</style>
<script src="careers-data.js"></script>
</head>
<body class="pb-20">

<header class="sticky top-0 bg-[#020617]/90 backdrop-blur border-b border-white/5 px-6 py-4 z-50">
  <div class="max-w-7xl mx-auto flex justify-between items-center">
    <a href="index.html" class="text-2xl font-black italic">CAREER<span class="text-blue-500">STEPS</span></a>
  </div>
</header>

<main class="max-w-7xl mx-auto px-6 mt-12">
    <h1 class="text-5xl font-extrabold mb-10 italic uppercase">Explore <span class="text-blue-500">Pathways</span></h1>

    <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-12 p-8 bg-slate-900/50 rounded-[2rem] border border-slate-800">
        
        <div class="lg:col-span-1">
            <span class="label-text">Search Keyword</span>
            <input id="searchInput" placeholder="Search careers..." class="filter-select">
        </div>

        <div>
            <span class="label-text">Category</span>
            <select id="catDropdown" class="filter-select" onchange="updateFilters('category')"></select>
        </div>

        <div>
            <span class="label-text">Sub-Category</span>
            <select id="subDropdown" class="filter-select" onchange="updateFilters('subcategory')"></select>
        </div>

        <div>
            <span class="label-text">Education Level</span>
            <select id="eduDropdown" class="filter-select" onchange="updateFilters('education')">
                <option value="All">All Levels</option>
                <option value="10th">After 10th</option>
                <option value="12th">After 12th</option>
                <option value="Degree">Graduation/Diploma</option>
            </select>
        </div>
    </div>

    <div id="resultsCount" class="text-sm font-bold text-blue-400 mb-6 uppercase tracking-widest"></div>
    <div id="careerGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>
    <div id="noResults" class="hidden text-center py-20 text-slate-500 font-bold">No matches found for your criteria.</div>
    
    <div class="flex justify-center mt-16">
        <button onclick="loadMore()" id="loadMoreBtn" class="bg-blue-600 hover:bg-blue-700 px-14 py-4 rounded-xl font-black uppercase text-xs transition-all">Load More</button>
    </div>
</main>

<script>
const careers = (typeof careersData !== 'undefined') ? careersData : [];
let displayLimit = 12;

function initDropdowns() {
    const catSelect = document.getElementById("catDropdown");
    const categories = ["All Categories", ...new Set(careers.map(c => c.category))];
    catSelect.innerHTML = categories.map(cat => `<option value="${cat}">${cat}</option>`).join("");
    
    updateSubDropdown();
    render();
}

function updateSubDropdown() {
    const subSelect = document.getElementById("subDropdown");
    const selectedCat = document.getElementById("catDropdown").value;
    
    let subCats = ["All Subcategories"];
    if (selectedCat !== "All Categories") {
        const filtered = careers.filter(c => c.category === selectedCat);
        subCats = ["All Subcategories", ...new Set(filtered.map(c => c.subCategory))];
    }
    subSelect.innerHTML = subCats.map(s => `<option value="${s}">${s}</option>`).join("");
}

function updateFilters(type) {
    if (type === 'category') updateSubDropdown();
    displayLimit = 12;
    render();
}

function render() {
    const search = document.getElementById("searchInput").value.toLowerCase();
    const cat = document.getElementById("catDropdown").value;
    const sub = document.getElementById("subDropdown").value;
    const edu = document.getElementById("eduDropdown").value;

    const results = careers.filter(c => {
        const matchSearch = c.title.toLowerCase().includes(search);
        const matchCat = (cat === "All Categories" || c.category === cat);
        const matchSub = (sub === "All Subcategories" || c.subCategory === sub);
        
        // Education Logic
        let matchEdu = true;
        if (edu === "10th") matchEdu = c.after10 && c.after10 !== "N/A";
        if (edu === "12th") matchEdu = c.after12 && c.after12 !== "N/A";
        if (edu === "Degree") matchEdu = c.degree && c.degree !== "N/A";

        return matchSearch && matchCat && matchSub && matchEdu;
    });

    document.getElementById("resultsCount").textContent = `${results.length} Careers Found`;
    
    const grid = document.getElementById("careerGrid");
    grid.innerHTML = "";
    
    results.slice(0, displayLimit).forEach(c => {
        grid.innerHTML += `
        <div class="glass-card p-6 flex flex-col justify-between h-[380px]">
            <div>
                <span class="text-[9px] text-blue-500 font-black uppercase">${c.subCategory}</span>
                <h3 class="text-lg font-bold mt-2 text-white line-clamp-1">${c.title}</h3>
                <p class="text-[11px] text-slate-400 mt-4"><b class="text-slate-500">PATH:</b> ${c.after12}</p>
                <p class="text-emerald-400 font-bold mt-4 text-sm">${c.salary.entry || c.salary}</p>
            </div>
            <a href="career-detail.html?id=${c.id}" class="mt-6 border border-blue-600/30 bg-blue-600/10 hover:bg-blue-600 py-3 rounded-xl text-[10px] font-black text-center uppercase transition-all">View Roadmap</a>
        </div>`;
    });

    document.getElementById("noResults").classList.toggle("hidden", results.length > 0);
    document.getElementById("loadMoreBtn").style.display = results.length > displayLimit ? "block" : "none";
}

document.getElementById("searchInput").addEventListener("input", () => { displayLimit = 12; render(); });
function loadMore() { displayLimit += 12; render(); }
window.onload = initDropdowns;
</script>
</body>
</html>
